#!/bin/sh

echo "üîç Running pre-commit checks..."

# 1Ô∏è‚É£ Ensure .env is not tracked
if git ls-files --error-unmatch .env > /dev/null 2>&1; then
  echo "‚ùå .env file is tracked!"
  exit 1
fi

# 2Ô∏è‚É£ Ensure logs are ignored
if ! grep -q "^logs/" .gitignore; then
  echo "‚ùå logs/ is not ignored in .gitignore"
  exit 1
fi

# 3Ô∏è‚É£ Ensure JS is formatted (ONLY if JS files exist)
FILES=$(git ls-files "src/**/*.js")

if [ -n "$FILES" ]; then
  echo "Checking formatting..."
  npx prettier --check $FILES
else
  echo "No JS files found, skipping Prettier check"
fi

echo "‚úÖ Pre-commit checks passed"


